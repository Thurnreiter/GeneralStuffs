# Visitor Pattern
Die Idee des Patterns ist es, dass Besucher zu besuchende Objekte „besuchen”. Ein Besuch sieht so aus, dass z.B. eine Accept()-Methode auf dem zu besuchenden Objekt aufgerufen wird, in deren Übergabewerten das Besuchs-Objekt selbst übergeben wird. Das zu besuchende Objekt, ruft dann mit sich selbst als Parameter, eine Visit()-Methode im Besuchs-Objekt auf. In dieser Methode findet dann erst die eigentliche Logik eines Algorithmus statt. Es findet also ein doppelter Aufruf statt. 
Siehe (http://www.tornau.name/2016/04/das-visitor-pattern-besucher-muster/)

Mit anderen Worten, ein Besucher (Visitor) besucht jemanden (Object.Accept) und der ruft dann vom Besucher eine Methode auf mit seinen Daten. Beispiel, ich bin eine Hausmeister (also vom Typ Visitor) und besuche oder betrete ein Gebäude, durch die Türe (hier per Accept()). Sobald im ich im Gebäude bin, hole ich mir vom Schlüsselkasten den Schlüssel zum Werkzeugraum. Der Schlüsselkasten kann hier eine Property der Klasse Gebäude sein. Da das Gebäude an den Visitor also mich, dem Hausmeister übergeben wurde, weiss ich wo was liegt. Jetzt kann ich meine Arbeit ausführen, für die ich gerufen wurde, mit dem Werkzeug aus dem Gebäude. Das Gebäude kann natürlich jederzeit mehrere Hausmeister eintreten lassen und verschiedene Aufgaben ausführen lassen ohne sich selbst darum zu kümmern. So kann es einen Heizungsmonteur geben, der regelmässig vorbeischaut und die Heizung kontrolliert und ggf. repariert. Wie er dies genau macht muss das Gebäude nicht wissen. Der Algorithmus bleibt also außerhalb der Klasse Gebäude und kann für verschiedene Gebäude angewendet werden. Es muss also nicht jedes Gebäude wissen wie es die Heizung wartet, sondern nur der Heizungsmonteur. Der Heizungsmonteur ist natürlich ohne ein Gebäude arbeitslos. So ist es also möglich alte Gebäude mit neuen Heizungsmonteuren auszustatten, als wie das Gebäude abzureissen und eine neues zu bauen mit einem fest angestellten Heizungsmonteur.

Mit dem Visitor Pattern erweitere ich Klassen. Die Erweiterung ist nicht in meine Klassen eingebaut, sondern getrennt von allem. Ein Grund kann sein, das ich die Klassen nicht erweitern kann. Das ganze geht in die Richtung Aspekt orientierte Programmierung. So wie der Aspekt etwas zu drucken oder etwas zu speichern usw.. All solche Methoden fasse ich mit dem Visitor quer durch alle Klassen zusammen ohne die eigentlichen Klassen zu versauen. Sonst wandert jede Berechnung in die jeweilige Klasse. Würde man klassisch eine Steuerberechnung für TGebäude und TFahrzeuge implementieren, hätte jede Klasse für sich die eigene Berechnungsmethode. Mit dem Visitor Pattern ist dies nur an einer Stelle zu implementieren und das für alle Klassen.